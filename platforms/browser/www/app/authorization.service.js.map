{"version":3,"file":"authorization.service.js","sourceRoot":"","sources":["authorization.service.ts"],"names":[],"mappings":"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","sourcesContent":["import {EventEmitter, Injectable, Inject} from \"@angular/core\";\nimport {User} from \"./user.interface\";\nimport { ToastsManager } from 'ng2-toastr/ng2-toastr'\nimport { AngularFire, defaultFirebase, FirebaseRef, FirebaseListObservable } from 'angularfire2';\n\ndeclare var Firebase: any;\n\n@Injectable()\nexport class AuthorizationService {\n    \n    user: any;\n    expire: any;\n    userExists: boolean;\n    \n    constructor(@Inject(FirebaseRef) private _ref: Firebase, public toastr: ToastsManager) {}\n\n    createUserAccount(user: User) {\n\n        var that = this;\n\n        this._ref.createUser({\n            email: user.email,\n            password: user.password\n        }, function(error, userData) {\n            if (error) {\n                that.toastr.error(\"The email address is already exists. Choose another one!\", \"Error!\");\n                that.userExists = false;\n            } else {\n                that.toastr.success(\"Your account has been successfully created!\", \"Success!\");\n                that.userExists = true;\n            }\n        });\n    }\n\n    loginUser(user: User) {\n\n        var that = this;\n        \n        this.user = null;\n        \n        this._ref.authWithPassword({\n            email: user.email,\n            password: user.password\n            \n        },  function(error, authData) {\n            \n            if (error) {\n                that.toastr.warning(\"Wrong username or password. Please try again!\", \"Alert!\");\n            \n            } else {\n                localStorage.setItem('token', authData.token);\n                  \n                that.toastr.info(\"Welcome, you are now logged in to your account!\");\n                \n                var d = new Date();\n                var n = d.getTime();\n                \n                var ref = new Firebase(\"https://dazzling-fire-7472.firebaseio.com/users\");\n            \n                ref.child(authData.uid).once('value', function(snapshot) {\n                    \n                    ref.child(authData.uid).update({\n                    provider: authData.provider,\n                    email: authData.password.email,\n                    expire: n       \n                     \n                    });\n                });      \n            }        \n        }); \n    }\n    \n    loginFacebookAuth() {\n\n        var that = this;\n        \n        this.user = null;\n        \n        this._ref.authWithOAuthPopup(\"facebook\", function(error, authData) {\n            if (error) {\n                \n                if (error.code === \"TRANSPORT_UNAVAILABLE\") {\n                    \n                    // fall-back to browser redirects, and pick up the session\n                    // automatically when we come back to the origin page\n                    ref.authWithOAuthRedirect(\"facebook\", function(error) {\n\n                    that.toastr.info(\"Welcome, you are now logged in with \" + authData.provider + \"!\");\n                             \n                    localStorage.setItem('token', authData.token);\n                \n                    var d = new Date();\n                    var n = d.getTime(); \n                \n                    var ref = new Firebase(\"https://dazzling-fire-7472.firebaseio.com/users\");\n            \n                    ref.child(authData.uid).once('value', function(snapshot) {\n                    \n                        ref.child(authData.uid).update({\n                            provider: authData.provider,\n                            email: authData.facebook.email,\n                            expire: n       \n                        \n                            });\n                        });     \n                     });\n                }          \n            } \n            \n            else if(authData) {\n\n                that.toastr.info(\"Welcome, you are now logged in with \" + authData.provider + \"!\");\n\n                localStorage.setItem('token', authData.token);\n                \n                var d = new Date();\n                var n = d.getTime();\n                \n                var ref = new Firebase(\"https://dazzling-fire-7472.firebaseio.com/users\");\n            \n                ref.child(authData.uid).once('value', function(snapshot) {\n                    \n                    ref.child(authData.uid).update({\n                    provider: authData.provider,\n                    email: authData.facebook.email,\n                    expire: n       \n                        \n                    });\n                });\n            }\n        }, { remember: \"default\", scope: \"email\"\n    });\n}\n    \n    loginGoogleAuth() {\n\n        var that = this;\n        \n        this.user = null;\n        \n        this._ref.authWithOAuthPopup(\"google\", function(error, authData) {\n            if (error) {\n                \n                if (error.code === \"TRANSPORT_UNAVAILABLE\") {\n                    \n                    // fall-back to browser redirects, and pick up the session\n                    // automatically when we come back to the origin page\n                    ref.authWithOAuthRedirect(\"google\", function(error) {\n\n                    that.toastr.info(\"Welcome, you are now logged in with \" + authData.provider + \"!\");\n                             \n                    localStorage.setItem('token', authData.token);\n                \n                    var d = new Date();\n                    var n = d.getTime(); \n                \n                    var ref = new Firebase(\"https://dazzling-fire-7472.firebaseio.com/users\");\n            \n                    ref.child(authData.uid).once('value', function(snapshot) {\n                    \n                        ref.child(authData.uid).update({\n                            provider: authData.provider,\n                            email: authData.google.email,\n                            expire: n       \n                        \n                            });\n                        });     \n                     });\n                }          \n            } \n            \n            else if(authData) {\n\n                that.toastr.info(\"Welcome, you are now logged in with \" + authData.provider + \"!\");\n\n                localStorage.setItem('token', authData.token);\n                \n                var d = new Date();\n                var n = d.getTime();\n                \n                var ref = new Firebase(\"https://dazzling-fire-7472.firebaseio.com/users\");\n            \n                ref.child(authData.uid).once('value', function(snapshot) {\n                    \n                    ref.child(authData.uid).update({\n                    provider: authData.provider,\n                    email: authData.google.email,\n                    expire: n       \n                        \n                    });\n                });\n            }\n        }, { remember: \"default\", scope: \"email\"\n    });\n}\n\n    loginTwitterAuth() {\n\n        var that = this;\n        \n        this.user = null;\n        \n        this._ref.authWithOAuthPopup(\"twitter\", function(error, authData) {\n            if (error) {\n                \n                if (error.code === \"TRANSPORT_UNAVAILABLE\") {\n                    \n                    // fall-back to browser redirects, and pick up the session\n                    // automatically when we come back to the origin page\n                    ref.authWithOAuthRedirect(\"twitter\", function(error) {\n\n                    that.toastr.info(\"Welcome, you are now logged in with \" + authData.provider + \"!\");\n                             \n                    localStorage.setItem('token', authData.token);\n                \n                    var d = new Date();\n                    var n = d.getTime(); \n                \n                    var ref = new Firebase(\"https://dazzling-fire-7472.firebaseio.com/users\");\n            \n                    ref.child(authData.uid).once('value', function(snapshot) {\n                    \n                        ref.child(authData.uid).update({\n                            provider: authData.provider,\n                            email: authData.twitter.username,\n                            expire: n       \n                        \n                            });\n                        });     \n                     });\n                }          \n            } \n            \n            else if(authData) {\n\n                that.toastr.info(\"Welcome, you are now logged in with \" + authData.provider + \"!\");\n\n                localStorage.setItem('token', authData.token);\n                \n                var d = new Date();\n                var n = d.getTime();\n                \n                var ref = new Firebase(\"https://dazzling-fire-7472.firebaseio.com/users\");\n            \n                ref.child(authData.uid).once('value', function(snapshot) {\n                    \n                    ref.child(authData.uid).update({\n                    provider: authData.provider,\n                    email: authData.twitter.username,\n                    expire: n       \n                        \n                    });\n                });\n            }\n        }, { remember: \"default\", scope: \"username\"\n    });\n}\n\n    loginGitHubAuth() {\n        \n        var that = this;\n        \n        this.user = null;\n        \n        this._ref.authWithOAuthPopup(\"github\", function(error, authData) {\n            if (error) {\n                \n                if (error.code === \"TRANSPORT_UNAVAILABLE\") {\n                    \n                    // fall-back to browser redirects, and pick up the session\n                    // automatically when we come back to the origin page\n                    ref.authWithOAuthRedirect(\"github\", function(error) {\n\n                    that.toastr.info(\"Welcome, you are now logged in with \" + authData.provider + \"!\");\n                             \n                    localStorage.setItem('token', authData.token);\n                \n                    var d = new Date();\n                    var n = d.getTime(); \n                \n                    var ref = new Firebase(\"https://dazzling-fire-7472.firebaseio.com/users\");\n            \n                    ref.child(authData.uid).once('value', function(snapshot) {\n                    \n                        ref.child(authData.uid).update({\n                            provider: authData.provider,\n                            email: authData.github.email,\n                            expire: n       \n                        \n                            });\n                        });     \n                     });\n                }          \n            } \n            \n            else if(authData) {\n\n                that.toastr.info(\"Welcome, you are now logged in with \" + authData.provider + \"!\");\n\n                localStorage.setItem('token', authData.token);\n                \n                var d = new Date();\n                var n = d.getTime();\n                \n                var ref = new Firebase(\"https://dazzling-fire-7472.firebaseio.com/users\");\n            \n                ref.child(authData.uid).once('value', function(snapshot) {\n                    \n                    ref.child(authData.uid).update({\n                    provider: authData.provider,\n                    email: authData.github.email,\n                    expire: n       \n                        \n                    });\n                });\n            }\n        }, { remember: \"default\", scope: \"user\"\n    });\n}\n    \n    isAuthenticated(): boolean {\n       \n        if(localStorage.getItem('token') == null) {\n            localStorage.getItem('token');\n        }\n\n        if(this._ref.getAuth() != null && this.user == null) {\n            console.log(this.user);\n            this.getLoggedInUser().then(res => this.user = res);\n        }\n         \n        return localStorage.getItem('token') !== null; \n    }\n    \n    killAuth() {\n        this._ref.unauth();\n        localStorage.removeItem('token');\n    }\n    \n    getLoggedInUser() {\n        var authData = this._ref.getAuth();\n        var ref = new Firebase(\"https://dazzling-fire-7472.firebaseio.com/users/\" + authData.uid);\n        return ref.once(\"value\").then((snapshot) => {\n            return snapshot.val().email;\n        });\n     }\n     \n     returnLoggedInUser() {\n         return this.user;\n     }\n\n     returnCreateUserSucceed() {\n         return this.userExists;\n     }\n}\n"]}