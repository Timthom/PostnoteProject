{"version":3,"file":"authorization.service.js","sourceRoot":"","sources":["authorization.service.ts"],"names":[],"mappings":"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","sourcesContent":["import {EventEmitter, Injectable, Inject} from \"@angular/core\";\nimport {User} from \"./user.interface\";\nimport { AngularFire, defaultFirebase, FirebaseRef, FirebaseListObservable } from 'angularfire2';\ndeclare var Firebase: any;\n\n@Injectable()\nexport class AuthorizationService {\n    \n    _userLoggedInSucceed;\n\n    constructor(@Inject(FirebaseRef) private _ref: Firebase) {}\n\n    createUserAccount(user: User) {\n        this._ref.createUser({\n            email: user.email,\n            password: user.password\n        }, function(error, userData) {\n            if (error) {\n                alert('E-post adressen finns redan. Välj en annan!');\n            } else {\n                alert(\"Registreringen lyckades\");\n            }\n        });\n    }\n\n    loginUser(user: User) {\n        this._ref.authWithPassword({\n            email: user.email,\n            password: user.password\n            \n        },  function(error, authData) {\n            \n            if (error) {\n                alert(\"Fel användarnamn eller lösenord. Försök igen!\");\n            \n            } else {\n                localStorage.setItem('token', authData.token);\n                console.log(authData);  \n                alert(\"Du är nu inloggad!\");\n            }        \n        }); \n    }\n    \n    loginFacebookAuth() {\n        this._ref.authWithOAuthPopup(\"facebook\", function(error, authData) {\n            if (error) {\n                console.log(\"Login Failed!\", error);\n            } else {\n                console.log(\"Authenticated successfully with payload:\", authData);\n                localStorage.setItem('token', authData.token);\n            }\n        }, { remember: \"sessionOnly\" \n    });\n}\n    \n    loginGoogleAuth() {\n        this._ref.authWithOAuthPopup(\"google\", function(error, authData) {\n            if (error) {\n                console.log(\"Login Failed!\", error);\n            } else {\n                console.log(\"Authenticated successfully with payload:\", authData);\n                localStorage.setItem('token', authData.token);\n            }\n        }, { remember: \"sessionOnly\" \n    });\n}\n\n    loginTwitterAuth() {\n        this._ref.authWithOAuthPopup(\"twitter\", function(error, authData) {\n            if (error) {\n                console.log(\"Login Failed!\", error);\n            } else {\n                console.log(\"Authenticated successfully with payload:\", authData);\n                localStorage.setItem('token', authData.token);\n            }\n        }, { remember: \"sessionOnly\" \n    });\n}\n\n    loginGitHubAuth() {\n        this._ref.authWithOAuthPopup(\"github\", function(error, authData) {\n            if (error) {\n                console.log(\"Login Failed!\", error);\n            } else {\n                console.log(\"Authenticated successfully with payload:\", authData);\n                localStorage.setItem('token', authData.token);\n            }\n        }, { remember: \"sessionOnly\" \n    });\n}\n        \n    isAuthenticated(): boolean {\n       \n        if(localStorage.getItem('token') == null) {\n            localStorage.getItem('token');\n        }\n         \n        return localStorage.getItem('token') !== null; \n    }\n    \n    killAuth() {\n        this._ref.unauth();\n        localStorage.removeItem('token');\n    }\n}"]}